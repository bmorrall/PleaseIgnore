- content_for(:page_title) { t('.page_title') }

- if display_profile?
  %section
    %header.page-header
      %h3 Profile Information

    = simple_form_for(resource,
                      as: resource_name,
                      url: registration_path(resource_name),
                      html: { method: :put, role: 'form', class: 'form-horizontal' },
                      wrapper: :horizontal_bootstrap,
                      defaults: horizontal_bootstrap_defaults) do |f|
      = f.error_notification
      = f.input :name
      = f.input :email
      .form-group
        .col-sm-offset-3.col-sm-6
          %button.btn.btn.btn-primary(type='submit')
            = fa 'user'
            Update Profile
          - if resource.errors.any?
            = link_to 'Cancel', edit_user_registration_path, class: 'btn btn-default'

- if display_password_change?
  %section
    %header.page-header
      %h3 Change Password

    = simple_form_for(resource,
                      as: resource_name,
                      url: registration_path(resource_name),
                      html: { method: :put, role: 'form', class: 'form-horizontal' },
                      wrapper: :horizontal_bootstrap,
                      defaults: horizontal_bootstrap_defaults) do |f|
      = f.error_notification
      - if resource.encrypted_password.blank?
        = f.input :email
      = f.input :password, label: 'New Password'
      = f.input :password_confirmation
      = f.input :current_password
      .form-group
        .col-sm-offset-3.col-sm-6
          %button.btn.btn.btn-primary(type='submit')
            = fa 'key'
            Change Password
          - if resource.errors.any?
            = link_to 'Cancel', edit_user_registration_path, class: 'btn btn-default'

- if display_accounts? && omniauth_providers.any?
  %section
    %header.page-header
      %h3 Linked Accounts

    - cache [:v1, resource, :profile_accounts], default_cache_params do
      .form-horizontal
        // Linked Accounts
        - decorate_account_collection resource.accounts do |accounts|
          = sortable_accounts_list resource do
            = render partial: 'account', collection: accounts

        // Link Account Items
        - omniauth_providers.each do |provider|
          - unless resource.provider_account? provider
            = render partial: 'connect_account', locals: { provider: provider }

- if display_accounts?
  %section
    %header.page-header
      %h3 Delete Account

    .col-sm-offset-3.col-sm-9.col-md-7.col-lg-9
      %p You can delete your account, but keep in mind this action is irreversiable.
      = button_to registration_path(resource_name), data: { confirm: "Are you sure?" }, method: :delete, class: 'btn btn-danger' do
        = fa 'trash-o'
        Delete my account
